{
    "$id": "subnetworks.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Subnetworks",
    "definitions": {
        "shared": {
            "properties": {
                "name": {
                    "type": "string",
                    "deleteOnEmpty": true,
                    "description": "if this field is not provided ip_cidr_range value will be dynamically generated based on the ip_cidr_range. WARNING, if this field is not set changing the ip_cidr_range will change the name dynamically generated.",
                    "pattern": "^(?:[a-z](?:[-a-z0-9]{0,61}[a-z0-9])?)$",
                    "minLength": 1,
                    "maxLength": 63,
                    "examples": [
                        "<prefix>-<environment>-<network>-subnet-<192-168-0-0-24>"
                    ]
                },
                "description": {
                    "type": "string",
                    "deleteOnEmpty": true,
                    "description": "Description of this subnetwork."
                },
                "ip_cidr_range": {
                    "title": "IP CIDR Range",
                    "description": "IP space allocated to this subnetwork in CIDR format.",
                    "$ref": "shared.schema.json#/definitions/shared/properties/ip_cidr_range"
                },
                "purpose": {
                    "type": "string",
                    "widget": "Select",
                    "description": "The purpose of this subnetwork.",
                    "enum": [
                        "PRIVATE",
                        "PRIVATE_SERVICE_CONNECT",
                        "INTERNAL_HTTPS_LOAD_BALANCER"
                    ],
                    "default": "PRIVATE"
                },
                "log_config": {
                    "properties": {
                        "enabled": {
                            "title": "Enabled",
                            "type": "boolean",
                            "description": "Enable/disable VPC Flow Logs for this subnet.",
                            "default": false
                        },
                        "aggregation_interval": {
                            "title": "Aggregation Interval",
                            "type": "string",
                            "widget": "Select",
                            "description": "Toggles the aggregation interval for collecting flow logs. Increasing the interval time will reduce the amount of generated flow logs for long lasting connections.",
                            "enum": [
                                "INTERVAL_5_SEC",
                                "INTERVAL_30_SEC",
                                "INTERVAL_1_MIN",
                                "INTERVAL_5_MIN",
                                "INTERVAL_10_MIN",
                                "INTERVAL_15_MIN"
                            ],
                            "default": "INTERVAL_5_SEC"
                        },
                        "flow_sampling": {
                            "title": "Flow Sampling",
                            "type": "integer",
                            "description": "Set the sampling rate of VPC flow logs within the subnetwork where 100 means all collected logs are reported, 50 means half of all collected logs are reported and 0 means no logs are reported.",
                            "minimum": 0,
                            "maximum": 100,
                            "default": 50
                        },
                        "metadata": {
                            "title": "Metadata",
                            "description": "Configures whether metadata fields should be added to the reported logs. ",
                            "type": "string",
                            "widget": "Select",
                            "enum": [
                                "INCLUDE_ALL_METADATA",
                                "EXCLUDE_ALL_METADATA",
                                "CUSTOM_METADATA"
                            ],
                            "oneOf": [
                                {
                                    "title": "Include All Metadata",
                                    "description": "Include all metadata in VPC flow logs",
                                    "const": "INCLUDE_ALL_METADATA"
                                },
                                {
                                    "title": "Exclude All Metadata",
                                    "description": "Exclude all metadata in VPC flow logs",
                                    "const": "EXCLUDE_ALL_METADATA"
                                },
                                {
                                    "title": "Custom Metadata",
                                    "description": "Include only specific attributes for metadata in VPC flow logs",
                                    "const": "CUSTOM_METADATA"
                                }
                            ],
                            "default": "INCLUDE_ALL_METADATA"
                        },
                        "metadata_fields": {
                            "title": "Metadata Fields",
                            "description": "List of supported fields can be found at https://cloud.google.com/vpc/docs/flow-logs#record_format",
                            "type": "array",
                            "widget": "SimpleList",
                            "uniqueItems": true,
                            "items": {
                                "title": "Metadata Field",
                                "type": "string",
                                "widget": "Select",
                                "enum": [
                                    "src_instance",
                                    "src_instance.project_id",
                                    "src_instance.vm_name",
                                    "src_instance.region",
                                    "src_instance.zone",
                                    "dest_instance",
                                    "dest_instance.project_id",
                                    "dest_instance.vm_name",
                                    "dest_instance.region",
                                    "dest_instance.zone",
                                    "src_vpc",
                                    "src_vpc.vpc_name",
                                    "src_vpc.project_id",
                                    "src_vpc.subnetwork_name",
                                    "dest_vpc",
                                    "dest_vpc.vpc_name",
                                    "dest_vpc.project_id",
                                    "dest_vpc.subnetwork_name",
                                    "src_location",
                                    "src_location.continent",
                                    "src_location.country",
                                    "src_location.region",
                                    "src_location.city",
                                    "src_location.asn",
                                    "dest_location",
                                    "dest_location.continent",
                                    "dest_location.country",
                                    "dest_location.region",
                                    "dest_location.city",
                                    "dest_location.asn",
                                    "src_gke_details",
                                    "src_gke_details.cluster",
                                    "src_gke_details.cluster.cluster_name",
                                    "src_gke_details.cluster.cluster_location",
                                    "src_gke_details.pod",
                                    "src_gke_details.pod.pod_name",
                                    "src_gke_details.pod.pod_namespace",
                                    "src_gke_details.service",
                                    "src_gke_details.service.service_name",
                                    "src_gke_details.service.service_namespace",
                                    "dest_gke_details",
                                    "dest_gke_details.cluster",
                                    "dest_gke_details.cluster.cluster_name",
                                    "dest_gke_details.cluster.cluster_location",
                                    "dest_gke_details.pod",
                                    "dest_gke_details.pod.pod_name",
                                    "dest_gke_details.pod.pod_namespace",
                                    "dest_gke_details.service",
                                    "dest_gke_details.service.service_name",
                                    "dest_gke_details.service.service_namespace"
                                ],
                                "anyOf": [
                                    {
                                        "title": "Source Instance",
                                        "anyOf": [
                                            {
                                                "title": "src_instance",
                                                "description": "If the source of the connection was a VM located on the same VPC, this field is populated with VM instance details. In a Shared VPC configuration, project_id corresponds to the project that owns the instance, usually the service project.",
                                                "const": "src_instance"
                                            },
                                            {
                                                "title": "src_instance.project_id",
                                                "description": "ID of the project containing the VM",
                                                "const": "src_instance.project_id"
                                            },
                                            {
                                                "title": "src_instance.vm_name",
                                                "description": "Instance name of the VM",
                                                "const": "src_instance.vm_name"
                                            },
                                            {
                                                "title": "src_instance.region",
                                                "description": "Region of the VM",
                                                "const": "src_instance.region"
                                            },
                                            {
                                                "title": "src_instance.zone",
                                                "description": "Zone of the VM",
                                                "const": "src_instance.zone"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Destination Instance",
                                        "anyOf": [
                                            {
                                                "title": "dest_instance",
                                                "description": "If the destination of the connection was a VM located on the same VPC, this field is populated with VM instance details. In a Shared VPC configuration, project_id corresponds to the project that owns the instance, usually the service project.",
                                                "const": "dest_instance"
                                            },
                                            {
                                                "title": "dest_instance.project_id",
                                                "description": "ID of the project containing the VM",
                                                "const": "dest_instance.project_id"
                                            },
                                            {
                                                "title": "dest_instance.vm_name",
                                                "description": "Instance name of the VM",
                                                "const": "dest_instance.vm_name"
                                            },
                                            {
                                                "title": "dest_instance.region",
                                                "description": "Region of the VM",
                                                "const": "dest_instance.region"
                                            },
                                            {
                                                "title": "dest_instance.zone",
                                                "description": "Zone of the VM",
                                                "const": "dest_instance.zone"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Source VPC",
                                        "anyOf": [
                                            {
                                                "title": "src_vpc",
                                                "description": "If the source of the connection was a VM located on the same VPC, this field is populated with VPC network details. In a Shared VPC configuration, project_id corresponds to that of the host project.",
                                                "const": "src_vpc"
                                            },
                                            {
                                                "title": "src_vpc.project_id",
                                                "description": "ID of the project containing the VPC",
                                                "const": "src_vpc.project_id"
                                            },
                                            {
                                                "title": "src_vpc.vpc_name",
                                                "description": "VPC on which the VM is operating",
                                                "const": "src_vpc.vpc_name"
                                            },
                                            {
                                                "title": "src_vpc.subnetwork_name",
                                                "description": "Subnetwork on which the VM is operating",
                                                "const": "src_vpc.subnetwork_name"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Destination VPC",
                                        "anyOf": [
                                            {
                                                "title": "dest_vpc",
                                                "description": "If the destination of the connection was a VM located on the same VPC, this field is populated with VPC network details. In a Shared VPC configuration, project_id corresponds to that of the host project.",
                                                "const": "dest_vpc"
                                            },
                                            {
                                                "title": "dest_vpc.project_id",
                                                "description": "ID of the project containing the VPC",
                                                "const": "dest_vpc.project_id"
                                            },
                                            {
                                                "title": "dest_vpc.vpc_name",
                                                "description": "VPC on which the VM is operating",
                                                "const": "dest_vpc.vpc_name"
                                            },
                                            {
                                                "title": "dest_vpc.subnetwork_name",
                                                "description": "Subnetwork on which the VM is operating",
                                                "const": "dest_vpc.subnetwork_name"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Source Geographic Location",
                                        "anyOf": [
                                            {
                                                "title": "src_location",
                                                "description": "If the source of the connection was external to the VPC, this field is populated with available location metadata.",
                                                "const": "src_location"
                                            },
                                            {
                                                "title": "src_location.continent",
                                                "description": "Continent for external endpoints",
                                                "const": "src_location.continent"
                                            },
                                            {
                                                "title": "src_location.country",
                                                "description": "Country for external endpoints, represented as ISO 3166-1 Alpha-3 country codes.",
                                                "const": "src_location.country"
                                            },
                                            {
                                                "title": "src_location.region",
                                                "description": "Region for external endpoints",
                                                "const": "src_location.region"
                                            },
                                            {
                                                "title": "src_location.city",
                                                "description": "City for external endpoints",
                                                "const": "src_location.city"
                                            },
                                            {
                                                "title": "src_location.asn",
                                                "description": "The autonomous system number (ASN) of the external network to which this endpoint belongs.",
                                                "const": "src_location.asn"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Destination Geographic Location",
                                        "anyOf": [
                                            {
                                                "title": "dest_location",
                                                "description": "If the destination of the connection was external to the VPC, this field is populated with available location metadata.",
                                                "const": "dest_location"
                                            },
                                            {
                                                "title": "dest_location.continent",
                                                "description": "Continent for external endpoints",
                                                "const": "dest_location.continent"
                                            },
                                            {
                                                "title": "dest_location.country",
                                                "description": "Country for external endpoints, represented as ISO 3166-1 Alpha-3 country codes.",
                                                "const": "dest_location.country"
                                            },
                                            {
                                                "title": "dest_location.region",
                                                "description": "Region for external endpoints",
                                                "const": "dest_location.region"
                                            },
                                            {
                                                "title": "dest_location.city",
                                                "description": "City for external endpoints",
                                                "const": "dest_location.city"
                                            },
                                            {
                                                "title": "dest_location.asn",
                                                "description": "The autonomous system number (ASN) of the external network to which this endpoint belongs.",
                                                "const": "dest_location.asn"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Source Google Kubernetes",
                                        "anyOf": [
                                            {
                                                "title": "src_gke_details",
                                                "description": "GKE metadata for source endpoints. Only available if the endpoint is GKE.",
                                                "const": "src_gke_details"
                                            },
                                            {
                                                "title": "src_gke_details.cluster",
                                                "description": "GKE cluster metadata.",
                                                "const": "src_gke_details.cluster"
                                            },
                                            {
                                                "title": "src_gke_details.cluster.cluster_name",
                                                "description": "GKE cluster name.",
                                                "const": "src_gke_details.cluster.cluster_name"
                                            },
                                            {
                                                "title": "src_gke_details.cluster.cluster_location",
                                                "description": "Location of the cluster. This can be a zone or a region depending if the cluster is zonal or regional.",
                                                "const": "src_gke_details.cluster.cluster_location"
                                            },
                                            {
                                                "title": "src_gke_details.pod",
                                                "description": "GKE Pod metadata, populated when the source or destination of the traffic is a Pod.",
                                                "const": "src_gke_details.pod"
                                            },
                                            {
                                                "title": "src_gke_details.pod.pod_name",
                                                "description": "Name of the Pod.",
                                                "const": "src_gke_details.pod.pod_name"
                                            },
                                            {
                                                "title": "src_gke_details.pod.pod_namespace",
                                                "description": "Namespace of the Pod.",
                                                "const": "src_gke_details.pod.pod_namespace"
                                            },
                                            {
                                                "title": "src_gke_details.service",
                                                "description": "GKE Service metadata, populated in Service endpoints only. The record contains up to two Services. If there are more than two relevant Services, this field contains a single Service with a special MANY_SERVICES marker.",
                                                "const": "src_gke_details.service"
                                            },
                                            {
                                                "title": "src_gke_details.service.service_name",
                                                "description": "Name of the Service. If there are more than two relevant Services, the field is set to a special MANY_SERVICES marker.",
                                                "const": "src_gke_details.service.service_name"
                                            },
                                            {
                                                "title": "src_gke_details.service.service_namespace",
                                                "description": "Namespace of the Service.",
                                                "const": "src_gke_details.service.service_namespace"
                                            }
                                        ]
                                    },
                                    {
                                        "title": "Destination Google Kubernetes",
                                        "anyOf": [
                                            {
                                                "title": "dest_gke_details",
                                                "description": "GKE metadata for destination endpoints. Only available if the endpoint is GKE.",
                                                "const": "dest_gke_details"
                                            },
                                            {
                                                "title": "dest_gke_details.cluster",
                                                "description": "GKE cluster metadata.",
                                                "const": "dest_gke_details.cluster"
                                            },
                                            {
                                                "title": "dest_gke_details.cluster.cluster_name",
                                                "description": "GKE cluster name.",
                                                "const": "dest_gke_details.cluster.cluster_name"
                                            },
                                            {
                                                "title": "dest_gke_details.cluster.cluster_location",
                                                "description": "Location of the cluster. This can be a zone or a region depending if the cluster is zonal or regional.",
                                                "const": "dest_gke_details.cluster.cluster_location"
                                            },
                                            {
                                                "title": "dest_gke_details.pod",
                                                "description": "GKE Pod metadata, populated when the source or destination of the traffic is a Pod.",
                                                "const": "dest_gke_details.pod"
                                            },
                                            {
                                                "title": "dest_gke_details.pod.pod_name",
                                                "description": "Name of the Pod.",
                                                "const": "dest_gke_details.pod.pod_name"
                                            },
                                            {
                                                "title": "dest_gke_details.pod.pod_namespace",
                                                "description": "Namespace of the Pod.",
                                                "const": "dest_gke_details.pod.pod_namespace"
                                            },
                                            {
                                                "title": "dest_gke_details.service",
                                                "description": "GKE Service metadata, populated in Service endpoints only. The record contains up to two Services. If there are more than two relevant Services, this field contains a single Service with a special MANY_SERVICES marker.",
                                                "const": "dest_gke_details.service"
                                            },
                                            {
                                                "title": "dest_gke_details.service.service_name",
                                                "description": "Name of the Service. If there are more than two relevant Services, the field is set to a special MANY_SERVICES marker.",
                                                "const": "dest_gke_details.service.service_name"
                                            },
                                            {
                                                "title": "dest_gke_details.service.service_namespace",
                                                "description": "Namespace of the Service.",
                                                "const": "dest_gke_details.service.service_namespace"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "default": [],
                            "examples": [
                                [
                                    "src_vpc",
                                    "dest_vpc"
                                ],
                                [
                                    "src_instance.vm_name",
                                    "dest_instance.vm_name"
                                ]
                            ]
                        }
                    }
                }
            }
        },
        "metadata_default": {
            "additionalProperties": false,
            "type": "object",
            "properties": {
                "enabled": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/enabled"
                },
                "aggregation_interval": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/aggregation_interval"
                },
                "flow_sampling": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/flow_sampling"
                },
                "metadata": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/metadata",
                    "enum": [
                        "INCLUDE_ALL_METADATA",
                        "EXCLUDE_ALL_METADATA"
                    ]
                }
            }
        },
        "metadata_custom": {
            "additionalProperties": false,
            "type": "object",
            "properties": {
                "enabled": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/enabled"
                },
                "aggregation_interval": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/aggregation_interval"
                },
                "flow_sampling": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/flow_sampling"
                },
                "metadata": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/metadata",
                    "const": "CUSTOM_METADATA"
                },
                "metadata_fields": {
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/metadata_fields"
                }
            },
            "required": [
                "metadata_fields"
            ]
        },
        "private": {
            "title": "Private",
            "type": "object",
            "widget": "Accordions",
            "required": [
                "ip_cidr_range",
                "region"
            ],
            "additionalProperties": false,
            "properties": {
                "name": {
                    "title": "Name",
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/name"
                },
                "description": {
                    "title": "Description",
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/description"
                },
                "region": {
                    "title": "Region",
                    "$ref": "regions.schema.json#/definitions/region"
                },
                "ip_cidr_range": {
                    "title": "Primary CIDR Range",
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/ip_cidr_range"
                },
                "purpose": {
                    "title": "Purpose",
                    "type": "string",
                    "description": "The purpose of this subnetwork.",
                    "const": "PRIVATE"
                },
                "secondary_subnetworks": {
                    "title": "Secondary Subnetworks",
                    "description": "Collection of Secondary Subnetworks that are assigned to this Primary Subnetwokr",
                    "type": "array",
                    "widget": "GenericList",
                    "minItems": 0,
                    "maxItems": 30,
                    "uniqueItems": true,
                    "items": {
                        "title": "Secondary Subnetwork",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "name": {
                                "title": "Name",
                                "$ref": "subnetworks.schema.json#/definitions/shared/properties/name"
                            },
                            "nat_group_id": {
                                "title": "Nat Group ID",
                                "description": "Cloud Nat configuration ID to inherrit configruations from.",
                                "type": "string",
                                "examples": [
                                    "nat-group-alpha"
                                ]
                            },
                            "ip_cidr_range": {
                                "title": "Secondary CIDR Range",
                                "$ref": "subnetworks.schema.json#/definitions/shared/properties/ip_cidr_range"
                            }
                        },
                        "required": [
                            "ip_cidr_range"
                        ]
                    },
                    "examples": [
                        [
                            {
                                "name": "gke-services",
                                "ip_cidr_range": "192.168.0.0/24"
                            },
                            {
                                "nat_group_id": "nat-group-alpha",
                                "ip_cidr_range": "192.168.1.0/24"
                            },
                            {
                                "ip_cidr_range": "192.168.2.0/24"
                            }
                        ]
                    ]
                },
                "private_ip_google_access": {
                    "title": "Private IP Google Access",
                    "type": "string",
                    "description": "Provide access to Google Cloud APIs from this subnet for instances without a public ip address.",
                    "widget": "Select",
                    "enum": [
                        "ENABLED",
                        "DISABLED"
                    ],
                    "default": "ENABLED"
                },
                "log_config": {
                    "title": "Log Config",
                    "description": "Denotes the logging options for the subnetwork flow logs. If logging is enabled logs will be exported to Stackdriver.",
                    "type": "object",
                    "properties": {
                        "metadata": {
                            "$ref": "subnetworks.schema.json#/definitions/shared/properties/log_config/properties/metadata"
                        }
                    },
                    "allOf": [
                        {
                            "title": "Include / Exclude All Metadata",
                            "if": {
                                "not": {
                                    "properties": {
                                        "metadata": {
                                            "type": "string",
                                            "const": "CUSTOM_METADATA"
                                        }
                                    }
                                }
                            },
                            "then": {
                                "$ref": "subnetworks.schema.json#/definitions/metadata_default"
                            }
                        },
                        {
                            "title": "Include Custom Metadata",
                            "if": {
                                "properties": {
                                    "metadata": {
                                        "type": "string",
                                        "const": "CUSTOM_METADATA"
                                    }
                                }
                            },
                            "then": {
                                "$ref": "subnetworks.schema.json#/definitions/metadata_custom"
                            }
                        }
                    ],
                    "examples": [
                        {
                            "status": "ENABLED",
                            "aggregation_interval": "INTERVAL_1_MIN"
                        },
                        {
                            "status": "ENABLED",
                            "metadata": "EXCLUDE_ALL_METADATA",
                            "aggregation_interval": "INTERVAL_1_MIN"
                        },
                        {
                            "status": "ENABLED",
                            "metadata": "CUSTOM_METADATA",
                            "metadata_fields": [
                                "connection",
                                "src_vpc",
                                "dest_vpc"
                            ]
                        }
                    ]
                },
                "cloud_nat": {
                    "title": "Cloud Nat",
                    "description": "This section specifies how Primary and Secondary Subnetworks should be configured to NAT egress traffic.",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "subnetworks_to_nat": {
                            "title": "Subnetworks to NAT",
                            "description": "Used to determine if NAT should be applied to either Primary, Secondary or Combination of each Subnetworks<br>&ensp;&ensp;&ensp;&ensp;This section is only implemented if subnetworks_to_nat is set to SELECTED_PRIMARY_SUBNETWORKS_SELECTED_SECONDARY_SUBNETWORKS in the parent cloud_nat section.",
                            "type": "string",
                            "widget": "Select",
                            "enum": [
                                "DISABLED",
                                "ALL_SUBNETWORKS",
                                "PRIMARY_SUBNETWORK",
                                "PRIMARY_SUBNETWORK_SELECTED_SECONDARY_SUBNETWORKS",
                                "ALL_SECONDARY_SUBNETWORKS",
                                "SELECTED_SECONDARY_SUBNETWORKS"
                            ],
                            "oneOf": [
                                {
                                    "title": "Disabled",
                                    "description": "Cloud NAT should not be applied to either the primary or secondary subnetworks.<br>&ensp;&ensp;&ensp;&ensp;This does not override cloud_nat configurations in the parent object when set to ALL_PRIMARY_SUBNETWORKS_ALL_SECONDARY_SUBNETWORKS.",
                                    "const": "DISABLED"
                                },
                                {
                                    "title": "Primary and All Secondary Subnetworks",
                                    "description": "Cloud NAT Should be applied to the Primary and All Secondary Subnetworks.",
                                    "const": "ALL_SUBNETWORKS"
                                },
                                {
                                    "title": "Primary Subnetwork",
                                    "description": "Cloud NAT Should be applied to the Primary Subnetwork.",
                                    "const": "PRIMARY_SUBNETWORK"
                                },
                                {
                                    "title": "Primary Subnetwork and Selected Secondary Subnetworks",
                                    "description": "Cloud NAT Should be applied to the Primary and Selected Secondary Subnetworks.",
                                    "const": "PRIMARY_SUBNETWORK_SELECTED_SECONDARY_SUBNETWORKS"
                                },
                                {
                                    "title": "All Secondary Subnetworks",
                                    "description": "Cloud NAT Should be applied to All Secondary Subnetworks.",
                                    "const": "ALL_SECONDARY_SUBNETWORKS"
                                },
                                {
                                    "title": "Selected Secondary Subnetworks",
                                    "description": "Cloud NAT Should be applied to Selected Secondary Subnetworks.",
                                    "const": "SELECTED_SECONDARY_SUBNETWORKS"
                                }
                            ],
                            "default": "DISABLED"
                        },
                        "nat_group_id": {
                            "title": "Nat Group ID",
                            "description": "This ID is used to match the corresponding cloud nat configuration in the parent object.",
                            "type": "string",
                            "examples": [
                                "nat-group-alpha"
                            ]
                        }
                    },
                    "allOf": [
                        {
                            "title": "DISABLED",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "DISABLED"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat"
                                ]
                            }
                        },
                        {
                            "title": "ALL_SUBNETWORKS",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "ALL_SUBNETWORKS"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat",
                                    "nat_group_id"
                                ]
                            }
                        },
                        {
                            "title": "PRIMARY_SUBNETWORK",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "PRIMARY_SUBNETWORK"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat",
                                    "nat_group_id"
                                ]
                            }
                        },
                        {
                            "title": "PRIMARY_SUBNETWORK_SELECTED_SECONDARY_SUBNETWORKS",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "PRIMARY_SUBNETWORK_SELECTED_SECONDARY_SUBNETWORKS"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat",
                                    "nat_group_id"
                                ]
                            }
                        },
                        {
                            "title": "ALL_SECONDARY_SUBNETWORKS",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "ALL_SECONDARY_SUBNETWORKS"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat"
                                ]
                            }
                        },
                        {
                            "title": "SELECTED_SECONDARY_SUBNETWORKS",
                            "if": {
                                "properties": {
                                    "subnetworks_to_nat": {
                                        "type": "string",
                                        "const": "SELECTED_SECONDARY_SUBNETWORKS"
                                    }
                                }
                            },
                            "then": {
                                "required": [
                                    "subnetworks_to_nat"
                                ]
                            }
                        }
                    ],
                    "examples": [
                        {},
                        {
                            "subnetworks_to_nat": "ALL_SUBNETWORKS",
                            "nat_group_id": "nat-group-alpha"
                        },
                        {
                            "subnetworks_to_nat": "SELECTED_SECONDARY_SUBNETWORKS",
                            "nat_group_id": "nat-group-alpha"
                        },
                        {
                            "subnetworks_to_nat": "ALL_SECONDARY_SUBNETWORKS"
                        }
                    ]
                }
            },
            "examples": [
                {
                    "ip_cidr_range": "192.168.0.0/24",
                    "region": "US-CENTRAL1",
                    "private_ip_google_access": "ENABLED",
                    "cloud_nat": {
                        "subnetworks_to_nat": "SELECTED_SECONDARY_SUBNETWORKS"
                    },
                    "purpose": "PRIVATE",
                    "log_config": {
                        "enabled": true,
                        "metadata": "INCLUDE_ALL_METADATA",
                        "flow_sampling": 50,
                        "metadata_fields": [],
                        "aggregation_interval": "INTERVAL_5_SEC"
                    },
                    "secondary_subnetworks": [
                        {
                            "ip_cidr_range": "192.168.1.0/24",
                            "nat_group_id": "nat-group-alpha"
                        }
                    ]
                },
                {
                    "ip_cidr_range": "192.168.16.0/24",
                    "region": "US-CENTRAL1",
                    "private_ip_google_access": "ENABLED",
                    "cloud_nat": {
                        "subnetworks_to_nat": "ALL_SUBNETWORKS",
                        "nat_group_id": "nat-group-alpha"
                    },
                    "purpose": "PRIVATE",
                    "log_config": {
                        "enabled": true,
                        "metadata": "INCLUDE_ALL_METADATA",
                        "flow_sampling": 50,
                        "metadata_fields": [],
                        "aggregation_interval": "INTERVAL_5_SEC"
                    },
                    "secondary_subnetworks": [
                        {
                            "ip_cidr_range": "192.168.17.0/24"
                        }
                    ]
                }
            ]
        },
        "private_service_connect": {
            "title": "Private Service Connect",
            "type": "object",
            "widget": "Accordions",
            "additionalProperties": false,
            "required": [
                "ip_cidr_range",
                "region"
            ],
            "properties": {
                "name": {
                    "title": "Name",
                    "$ref": "#/definitions/shared/properties/name"
                },
                "description": {
                    "title": "Description",
                    "$ref": "#/definitions/shared/properties/description"
                },
                "region": {
                    "title": "Region",
                    "$ref": "regions.schema.json#/definitions/region"
                },
                "ip_cidr_range": {
                    "title": "Primary CIDR Range",
                    "$ref": "subnetworks.schema.json#/definitions/shared/properties/ip_cidr_range"
                },
                "purpose": {
                    "title": "Purpose",
                    "type": "string",
                    "const": "PRIVATE_SERVICE_CONNECT"
                }
            },
            "examples": [
                {
                    "region": "US-CENTRAL1",
                    "ip_cidr_range": "192.168.0.0/24",
                    "purpose": "PRIVATE_SERVICE_CONNECT"
                }
            ]
        },
        "internal_https_load_balancer": {
            "title": "Ineranl HTTP(s) Load Balancer",
            "type": "object",
            "widget": "Accordions",
            "additionalProperties": false,
            "required": [
                "ip_cidr_range",
                "region"
            ],
            "properties": {
                "name": {
                    "title": "Name",
                    "$ref": "#/definitions/shared/properties/name"
                },
                "description": {
                    "title": "Description",
                    "$ref": "#/definitions/shared/properties/description"
                },
                "region": {
                    "title": "Region",
                    "$ref": "regions.schema.json#/definitions/region"
                },
                "ip_cidr_range": {
                    "title": "Primary CIDR Range",
                    "$ref": "#/definitions/shared/properties/ip_cidr_range"
                },
                "purpose": {
                    "title": "Purpose",
                    "type": "string",
                    "const": "INTERNAL_HTTPS_LOAD_BALANCER"
                },
                "role": {
                    "title": "Role",
                    "type": "string",
                    "enum": [
                        "BACKUP",
                        "ACTIVE"
                    ],
                    "default": "ACTIVE"
                }
            },
            "examples": [
                {
                    "region": "US-CENTRAL1",
                    "ip_cidr_range": "192.168.0.0/24",
                    "purpose": "INTERNAL_HTTPS_LOAD_BALANCER",
                    "role": "ACTIVE"
                },
                {
                    "region": "US-CENTRAL1",
                    "ip_cidr_range": "192.168.1.0/24",
                    "purpose": "INTERNAL_HTTPS_LOAD_BALANCER",
                    "role": "BACKUP"
                }
            ]
        },
        "subnetworks": {
            "type": "array",
            "widget": "GenericList",
            "uniqueItems": true,
            "minItems": 0,
            "maxItems": 100,
            "items": {
                "type": "object",
                "title": "Subnetwork",
                "properties": {
                    "purpose": {
                        "$ref": "subnetworks.schema.json#/definitions/shared/properties/purpose"
                    }
                },
                "allOf": [
                    {
                        "title": "Private",
                        "description": "A subnetwork with purpose set to PRIVATE is a user-created subnetwork that is reserved for Google Compute Engine instances.",
                        "if": {
                            "properties": {
                                "purpose": {
                                    "type": "string",
                                    "const": "PRIVATE"
                                }
                            }
                        },
                        "then": {
                            "$ref": "#/definitions/private"
                        }
                    },
                    {
                        "title": "Private Service Connect",
                        "description": "A subnetwork with purpose set to PRIVATE_SERVICE_CONNECT is a user-created subnetwork that is reserved for Private Service Connect Internal Load Balancing.",
                        "if": {
                            "properties": {
                                "purpose": {
                                    "type": "string",
                                    "const": "PRIVATE_SERVICE_CONNECT"
                                }
                            },
                            "required": [
                                "purpose"
                            ]
                        },
                        "then": {
                            "$ref": "#/definitions/private_service_connect"
                        }
                    },
                    {
                        "title": "Internal HTTP(s) Load Balancer",
                        "description": "A subnetwork with purpose set to INTERNAL_HTTPS_LOAD_BALANCER is a user-created subnetwork that is reserved for Internal HTTP(S) Load Balancing.",
                        "if": {
                            "properties": {
                                "purpose": {
                                    "type": "string",
                                    "const": "INTERNAL_HTTPS_LOAD_BALANCER"
                                }
                            },
                            "required": [
                                "purpose"
                            ]
                        },
                        "then": {
                            "$ref": "#/definitions/internal_https_load_balancer"
                        }
                    }
                ]
            }
        }
    }
}